<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<title>로그인</title>
<style type="text/css">

body {
  font-family: '맑은 고딕', sans-serif;
}

#sidebar {
  color: white;
  padding: 10px 5px;
  float: left;
  margin: 5px 5px 5px 0px;
}

#sidebar a {
  color: white;
  text-decoration: none;
}

#content {
  margin-left: 200px;
}

#footer {
  clear: left;
}

</style>
</head>
<body>

<div id='header' style='background-color:gray; height:40px;position:relative;'></div>

<div id='sidebar' style='background-color:Skyblue; width:180px; height:400px;'></div>

<div id="content">
<h1>로그인</h1>
<form>
<table border='1'>
<tr>
  <th>회원 유형</th>
  <td>
    <input type='radio' name='user-type' value='student' checked>학생
    <input type='radio' name='user-type' value='teacher'>강사
    <input type='radio' name='user-type' value='manager'>운영자
  </td>
</tr>
<tr><th>이메일</th><td><input id='email' type='text' placeholder='예)hong@test.com'></td></tr>
<tr><th>암호</th><td><input id='password' type='password'></td></tr>
<tr><th></th><td><input id='save-email' type='checkbox'> 이메일 저장 </td></tr>
</table>
<button id='login-btn' type='button'>로그인</button>
</form>

</div>

<div id='footer' style='background-color:gray; height:20px; margin-top:20px;'></div>

<script src="../js/bit.js"></script>
<script src="../js/common.js"></script>
<script>
document.querySelector('#login-btn').onclick = function() {
	var param = {
		email: document.querySelector('#email').value,
		password: document.querySelector('#password').value,
		saveEmail: document.querySelector('#save-email').checked 
	};
	
	var userTypeList = document.querySelectorAll('input[name=user-type]'); // 배열이 아니라 컬렉션 타입이 넘어온다.
	for (var i = 0; i < userTypeList.length; i++) {
		if (userTypeList[i].checked) {
			param.userType = userTypeList[i].value; 
			break;
		}
	}

	post('login.json', param, function(jsonText) {
		var ajaxResult = JSON.parse(jsonText);
		console.log(ajaxResult);
	});
}

//학생 목록 가져와서 tr 태그를 만들어 붙인다.
/*
get('list.json', function(jsonText) {
  var ajaxResult = JSON.parse(jsonText);
  var status = ajaxResult.status;
  
  if (status != "success")
    return;
  
  var list = ajaxResult.data;
  var tbody = document.querySelector('#list-table > tbody');
  
  for (var student of list) {
    var tr = document.createElement("tr");
    tr.innerHTML = "<tr><td>" + 
      student.memberNo + "</td><td><a class='name-link' href='#' data-no='" + 
    	student.memberNo + "'>" + 
      student.name + "</a></td><td>" + 
      student.tel + "</td><td>" + 
      student.working + "</td><td>" +
      student.grade + "</td><td>" +
      student.schoolName + "</td></tr>";
    tbody.appendChild(tr);
  }
	// 학생 목록에서 이름 링크에 click 이벤트를 처리한다.name-link 라벨이 붙은 모든 링크를 찾는다.
	var al = document.querySelectorAll('.name-link');
	for (var a of al) {
		a.onclick = function(event) {
			event.preventDefault(); // a 동작이 안되게 해야 한다.
			location.href = 'view.html?memberNo=' + this.getAttribute('data-no'); 
			// onclick 객체는 a에 속한다. 같은객체에 속하면 this를 적는다.
		}
	}
});
*/

function goView(no) {
	alert(no);
	return false;
}
</script>

</body>
</html>









    